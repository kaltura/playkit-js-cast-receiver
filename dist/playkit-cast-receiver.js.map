{"version":3,"sources":["./cast/receiver/webpack/bootstrap","./cast/receiver/external [\"KalturaPlayer\"]","./cast/receiver/./cast-engine.js","./cast/receiver/./default-player-config.js","./cast/receiver/./error/error.js","./cast/receiver/./error/error-type.js","./cast/receiver/./player-loader.js","./cast/receiver/./receiver-tracks-manager.js","./cast/receiver/./receiver-ads-manager.js","./cast/receiver/./receiver-manager.js","./cast/receiver/./receiver-manager-api.js","./cast/receiver/./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","KalturaPlayer","core","Track","Utils","FakeEvent","MediaType","getLogger","FakeEventTarget","EventManager","EventType","AudioTrack","TextTrack","AbrMode","MimeType","CastEngine","source","config","ABORT","CAN_PLAY","CAN_PLAY_THROUGH","DURATION_CHANGE","EMPTIED","ENDED","LOADED_DATA","LOADED_METADATA","LOAD_START","PAUSE","PLAY","PLAYING","PROGRESS","RATE_CHANGE","SEEKED","SEEKING","STALLED","TIME_UPDATE","SUSPEND","WAITING","_context","cast","framework","CastReceiverContext","getInstance","_playerManager","getPlayerManager","_eventManager","_createVideoElement","_init","mimeType","mimetype","toLowerCase","_supportedMimeTypes","includes","drmData","DASH","this","reset","videoElement","getVideoElement","listen","_seeking","_ended","isLive","dispatchEvent","broadcastStatus","_mediaElementEvents","forEach","mediaElementEvent","_el","startTime","_logger","debug","_isLoaded","_parseTracks","ABR_MODE_CHANGED","AUTO","_tracks","Promise","resolve","tracks","_paused","textTrack","TEXT_TRACK_CHANGED","selectedTextTrack","audioTrack","AUDIO_TRACK_CHANGED","selectedAudioTrack","videoTrack","VIDEO_TRACK_CHANGED","selectedVideoTrack","copyDeep","_source","_config","sources","type","LIVE","range","getLiveSeekableRange","seek","end","start","removeAll","destroy","_volume","_muted","Dom","removeAttribute","removeChild","parentNode","castMediaPlayerEl","document","getElementsByTagName","CAST_MEDIA_PLAYER_TAG","getMediaElement","attach","castAudioTracks","getAudioTracksManager","getTracks","audioTracks","_parseAudioTracks","castTextTracks","getTextTracksManager","textTracks","_parseTextTracks","concat","track","settings","id","trackId","index","label","language","kind","subType","active","push","getCurrentTimeSec","getStartTimeOfDvrWindow","getDurationSec","VOLUME_CHANGE","url","playsinline","playbackRate","getPlaybackRate","crossOrigin","autoplay","mutedAutoPlay","HLS","PROGRESSIVE","SMOOTH_STREAMING","StreamType","EngineType","DefaultPlayerConfig","playback","preload","disableUserCache","streamPriority","engine","CAST","format","ui","disable","ReceiverError","code","description","ErrorType","unRegisterEngine","registerEngine","PlayerLoader","castMediaElement","style","position","playerContainerEl","createElement","appendChild","body","HTML5","playerConfig","mergeDeep","targetId","player","setup","prependTo","TextStyleConverter","remote","TrackType","ReceiverTracksManager","_player","_attachListeners","mediaInfo","getMediaInformation","customData","_setInitialAudioTrack","audioLanguage","_setInitialTextTrack","textLanguage","addEventListener","events","REQUEST_EDIT_TRACKS_INFO","requestEvent","activeTrackIds","requestData","_handleAudioTrackSelection","_handleTextTrackSelection","textTrackStyle","_handleTextStyleSelection","TEXT","activeTextTrack","find","nextActiveTextTrack","selectTrack","offTrack","AUDIO","activeAudioTrack","nextActiveAudioTrack","textStyle","toPlayerTextStyle","textTracksManager","some","setActiveByLanguage","warn","audioTracksManager","length","audioTrackId","setActiveById","Ad","AdBreak","AdBreakType","CustomEventMessage","ReceiverAdsManager","AD_REACHED_25_PERCENT","AD_REACHED_50_PERCENT","AD_REACHED_75_PERCENT","positions","breakManager","getBreakManager","breaks","getBreaks","b","_sendEventAndCustomMessage","Event","AD_MANIFEST_LOADED","adBreaksPosition","breaksEvent","_toggleAdBreakListeners","adBreakOptions","_getAdBreakOptions","adBreak","AD_BREAK_START","_adBreak","AD_BREAK_END","findIndex","breakId","ALL_ADS_COMPLETED","adOptions","_getAdOptions","ad","breakClipId","AD_LOADED","_ad","AD_STARTED","_adIsPlaying","AD_COMPLETED","_adCanSkipTriggered","AD_PAUSED","AD_RESUMED","adDuration","getBreakClipDurationSec","adCurrentTime","getBreakClipCurrentTimeSec","percent","_timePercentEvent","AD_FIRST_QUARTILE","AD_MIDPOINT","AD_THIRD_QUARTILE","skippable","skipOffset","AD_CAN_SKIP","AD_PROGRESS","adProgress","currentTime","duration","muted","AD_MUTED","AD_VOLUME_CHANGED","messages","RequestData","MessageType","SKIP_AD","sendLocalMediaRequest","_adLifecycleEventHandlers","PLAYER_LOAD_COMPLETE","_onPlayerLoadComplete","BREAK_STARTED","_onBreakStarted","BREAK_ENDED","_onBreakEnded","BREAK_CLIP_LOADING","_onBreakClipLoading","BREAK_CLIP_STARTED","_onBreakClipStarted","BREAK_CLIP_ENDED","_onBreakClipEnded","_adTrackingEventHandlers","_onAdPaused","_onAdResumed","_playerEventHandlers","MUTE_CHANGE","_onMuteChange","_onVolumeChange","keys","event","toggle","_adProgressIntervalId","setInterval","_onAdProgress","removeEventListener","clearInterval","options","currentBreak","getBreakById","_getAdBreakTypeByPosition","numAds","breakClipIds","PRE","POST","MID","currentBreakClip","getBreakClipById","contentId","contentType","title","indexOf","clickThroughUrl","posterUrl","whenSkippable","linear","payload","toUpperCase","sendCustomMessage","CUSTOM_CHANNEL","undefined","receiverManager","DrmScheme","CustomMessageType","CustomActionType","CustomActionMessage","ReceiverManager","LOAD","onLoad","MEDIA_STATUS","onMediaStatus","STOP","onStop","REQUEST_PLAY","_onRequestPlayEvent","REQUEST_PAUSE","_onRequestPauseEvent","_onPlayEvent","_onPlayerLoadCompleteEvent","system","SYSTEM_VOLUME_CHANGED","_onSystemVolumeChangedEvent","loadPlayer","_tracksManager","_adsManager","defaultOptions","CastReceiverOptions","customNamespaces","JSON","loadRequestData","_reset","resovle","reject","media","mediaConfig","_maybeCreateVmapAdsRequest","_maybeReplaceAdTagTimestamp","ERROR","SOURCE_SELECTED","_onSourceSelected","loadMedia","setMedia","_destroy","mediaStatus","getMediaInfo","playerState","getPlayerState","addCustomMessageListener","customMessage","_onCustomMessage","_playerManagerEventHandlers","_messageInterceptorsHandlers","msg","setMessageInterceptor","_castContextEventHandlers","_shouldAutoPlay","_firstPlay","selectedSource","_handleAutoPlay","_handleLiveDvr","_setMediaInfo","_maybeSetDrmLicenseUrl","forceRedirectExternalStreams","Http","jsonp","contentUrl","data","redirectExternalStreamsHandler","streamType","BUFFERED","metadata","GenericMediaMetadata","subtitle","images","poster","hlsSegmentFormat","HlsSegmentFormat","TS","isDvr","removeSupportedMediaCommands","Command","SEEK","addSupportedMediaCommands","scheme","WIDEVINE","setMediaPlaybackInfoHandler","loadRequest","playbackConfig","protectionSystem","ContentProtection","licenseUrl","firstPlay","play","pause","loadPlayerAndSetInitialTracks","load","ready","then","setInitialTracks","listenOnce","systemVolumeChangedEvent","volume","level","customMessageEvent","ACTION","_handleCustomAction","customAction","action","skipAd","vmapAdsRequest","replaceTimestamp","adtag","regex","test","match","replace","Date","now","breakClips","breakClip","vastAdsRequest","adTagUrl","ReceiverManagerAPI","listener","getPlayer","VERSION","__VERSION__","NAME","__NAME__"],"mappings":"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","file":"playkit-cast-receiver.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = KalturaPlayer;","// @flow\nimport {core} from 'kaltura-player-js';\nimport {CAST_MEDIA_PLAYER_TAG} from './player-loader';\n\nconst {Track, Utils, FakeEvent, MediaType, getLogger, FakeEventTarget, EventManager, EventType, AudioTrack, TextTrack, AbrMode, MimeType} = core;\n\nclass CastEngine extends FakeEventTarget {\n  static get id(): string {\n    return 'cast';\n  }\n\n  static canPlaySource(source: Object): boolean {\n    const mimeType = source.mimetype.toLowerCase();\n    const supported = CastEngine._supportedMimeTypes.includes(mimeType);\n    if (supported) {\n      if (source.drmData) {\n        return MimeType.DASH.includes(mimeType);\n      }\n      return true;\n    }\n    return false;\n  }\n\n  static createEngine(source: Object, config: Object): Object {\n    return new this(source, config);\n  }\n\n  static _logger: any = getLogger('CastEngine');\n\n  static _supportedMimeTypes: Array<string> = [...MimeType.HLS, ...MimeType.DASH, ...MimeType.PROGRESSIVE, ...MimeType.SMOOTH_STREAMING];\n\n  _el: HTMLVideoElement;\n  _source: Object;\n  _config: Object;\n  _eventManager: EventManager;\n  _isLoaded: boolean = false;\n  _tracks: Array<Track> = [];\n  _volume: number = 1;\n  _muted: boolean = false;\n  _paused: boolean = false;\n  _seeking: boolean = false;\n  _ended: boolean = false;\n  _mediaElementEvents: Array<string> = [\n    EventType.ABORT,\n    EventType.CAN_PLAY,\n    EventType.CAN_PLAY_THROUGH,\n    EventType.DURATION_CHANGE,\n    EventType.EMPTIED,\n    EventType.ENDED,\n    EventType.LOADED_DATA,\n    EventType.LOADED_METADATA,\n    EventType.LOAD_START,\n    EventType.PAUSE,\n    EventType.PLAY,\n    EventType.PLAYING,\n    EventType.PROGRESS,\n    EventType.RATE_CHANGE,\n    EventType.SEEKED,\n    EventType.SEEKING,\n    EventType.STALLED,\n    EventType.TIME_UPDATE,\n    EventType.SUSPEND,\n    EventType.WAITING\n  ];\n\n  constructor(source: Object, config: Object) {\n    super();\n    this._context = cast.framework.CastReceiverContext.getInstance();\n    this._playerManager = this._context.getPlayerManager();\n    this._eventManager = new EventManager();\n    this._createVideoElement();\n    this._init(source, config);\n  }\n\n  restore(source: Object, config: Object): void {\n    this.reset();\n    this._init(source, config);\n  }\n\n  attach(): void {\n    const videoElement = this.getVideoElement();\n    this._eventManager.listen(videoElement, EventType.SEEKED, () => (this._seeking = false));\n    this._eventManager.listen(videoElement, EventType.SEEKING, () => (this._seeking = true));\n    this._eventManager.listen(videoElement, EventType.ENDED, () => {\n      this._ended = true;\n      // Receiver has a problem where the current time isn't equals to the duration when\n      // playback is ended. This prevent from analytics plugins to report 100% reached.\n      // So we're trigger time update event again on ended and take care to handle this state also in the\n      // current time setter.\n      if (!this.isLive()) {\n        this.dispatchEvent(new FakeEvent(EventType.TIME_UPDATE));\n      }\n    });\n    if (this.isLive()) {\n      this._eventManager.listen(videoElement, EventType.TIME_UPDATE, () => this._playerManager.broadcastStatus(true));\n    }\n    this._mediaElementEvents.forEach(mediaElementEvent =>\n      this._eventManager.listen(videoElement, mediaElementEvent, () => this.dispatchEvent(new FakeEvent(mediaElementEvent)))\n    );\n  }\n\n  detach(): void {\n    // Empty implementation\n  }\n\n  static runCapabilities(): void {\n    // Empty implementation\n  }\n\n  static prepareVideoElement(): void {\n    // Empty implementation\n  }\n\n  static getCapabilities(): Promise<Object> {\n    return Promise.resolve({\n      [CastEngine.id]: {\n        autoplay: true,\n        mutedAutoPlay: true\n      }\n    });\n  }\n\n  get id(): string {\n    return CastEngine.id;\n  }\n\n  getVideoElement(): HTMLVideoElement {\n    return this._el;\n  }\n\n  load(startTime: ?number): Promise<Object> {\n    CastEngine._logger.debug('Load start', startTime);\n    this._isLoaded = true;\n    this._parseTracks();\n    this.dispatchEvent(new FakeEvent(EventType.ABR_MODE_CHANGED, {mode: AbrMode.AUTO}));\n    CastEngine._logger.debug('Load end', this._tracks);\n    return Promise.resolve({tracks: this._tracks});\n  }\n\n  play(): void {\n    this._paused = false;\n  }\n\n  pause(): void {\n    this._paused = true;\n  }\n\n  hideTextTrack(): void {\n    // Empty implementation\n  }\n\n  selectTextTrack(textTrack: TextTrack): void {\n    this.dispatchEvent(new FakeEvent(EventType.TEXT_TRACK_CHANGED, {selectedTextTrack: textTrack}));\n  }\n\n  selectAudioTrack(audioTrack: AudioTrack): void {\n    this.dispatchEvent(new FakeEvent(EventType.AUDIO_TRACK_CHANGED, {selectedAudioTrack: audioTrack}));\n  }\n\n  selectVideoTrack(videoTrack: VideoTrack): void {\n    this.dispatchEvent(new FakeEvent(EventType.VIDEO_TRACK_CHANGED, {selectedVideoTrack: videoTrack}));\n  }\n\n  enableAdaptiveBitrate(): void {\n    // Empty implementation\n  }\n\n  isAdaptiveBitrateEnabled(): boolean {\n    return true;\n  }\n\n  getSelectedSource(): Object {\n    return Utils.Object.copyDeep(this._source);\n  }\n\n  isLive() {\n    return this._config.sources.type === MediaType.LIVE;\n  }\n\n  seekToLiveEdge(): void {\n    const range = this._playerManager.getLiveSeekableRange();\n    if (range) {\n      this._playerManager.seek(range.end);\n    }\n  }\n\n  getStartTimeOfDvrWindow(): number {\n    const range = this._playerManager.getLiveSeekableRange();\n    if (range) {\n      return range.start;\n    }\n    return 0;\n  }\n\n  reset(): void {\n    this._eventManager.removeAll();\n    this._tracks = [];\n    this._isLoaded = false;\n    this._paused = false;\n    this._seeking = false;\n    this._ended = false;\n  }\n\n  destroy(): void {\n    this._eventManager.destroy();\n    this._tracks = [];\n    this._isLoaded = false;\n    this._mediaElementEvents = [];\n    this._volume = 1;\n    this._muted = false;\n    this._paused = false;\n    this._seeking = false;\n    this._ended = false;\n    if (this._el) {\n      Utils.Dom.removeAttribute(this._el, 'src');\n      Utils.Dom.removeChild(this._el.parentNode, this._el);\n    }\n  }\n\n  set currentTime(value: number): void {\n    // Empty implementation\n  }\n\n  get currentTime(): number {\n    if (this.isLive()) {\n      return this._playerManager.getCurrentTimeSec() - this.getStartTimeOfDvrWindow();\n    }\n    if (this._ended) {\n      return this._playerManager.getDurationSec();\n    }\n    return this._playerManager.getCurrentTimeSec();\n  }\n\n  set muted(value: boolean): void {\n    this._muted = value;\n  }\n\n  get muted(): boolean {\n    return this._muted;\n  }\n\n  set volume(value: number): void {\n    this._volume = value;\n    this.dispatchEvent(EventType.VOLUME_CHANGE);\n  }\n\n  get volume(): number {\n    return this._volume;\n  }\n\n  get paused(): boolean {\n    return this._paused;\n  }\n\n  get seeking(): boolean {\n    return this._seeking;\n  }\n\n  get buffered(): Array<any> {\n    return [];\n  }\n\n  get duration(): number {\n    if (this.isLive()) {\n      const range = this._playerManager.getLiveSeekableRange();\n      if (range) {\n        return range.end - this.getStartTimeOfDvrWindow();\n      }\n    }\n    return this._playerManager.getDurationSec();\n  }\n\n  get src(): string {\n    return this._isLoaded ? this._source.url : '';\n  }\n\n  set playsinline(playsinline: boolean): void {\n    // Empty implementation\n  }\n\n  get playsinline(): boolean {\n    return true;\n  }\n\n  set playbackRate(playbackRate: number): void {\n    // Empty implementation\n  }\n\n  get playbackRate(): number {\n    return this._playerManager.getPlaybackRate();\n  }\n\n  get playbackRates(): Array<number> {\n    return [1];\n  }\n\n  get defaultPlaybackRate(): number {\n    return 1;\n  }\n\n  set crossOrigin(crossOrigin: ?string): void {\n    // Empty implementation\n  }\n\n  get crossOrigin(): ?string {\n    // Empty implementation\n    return null;\n  }\n\n  get ended(): boolean {\n    return this._ended;\n  }\n\n  _createVideoElement(): void {\n    const castMediaPlayerEl: Object = document.getElementsByTagName(CAST_MEDIA_PLAYER_TAG)[0];\n    if (castMediaPlayerEl) {\n      this._el = castMediaPlayerEl.getMediaElement();\n    }\n  }\n\n  _init(source: Object, config: Object): void {\n    this._source = source;\n    this._config = config;\n    this.attach();\n  }\n\n  _parseTracks(): void {\n    const audioTracksManager = this._playerManager.getAudioTracksManager();\n    const castAudioTracks = audioTracksManager.getTracks();\n    const audioTracks = this._parseAudioTracks(castAudioTracks);\n\n    const textTracksManager = this._playerManager.getTextTracksManager();\n    const castTextTracks = textTracksManager.getTracks();\n    const textTracks = this._parseTextTracks(castTextTracks);\n\n    this._tracks = audioTracks.concat(textTracks);\n  }\n\n  _parseTextTracks(castTextTracks: Array<Object>): Array<TextTrack> {\n    const textTracks = [];\n    castTextTracks.forEach(track => {\n      const settings: Object = {\n        id: track.trackId,\n        index: track.trackId - 1,\n        label: track.name,\n        language: track.language,\n        kind: track.subType || 'subtitles',\n        active: false\n      };\n      textTracks.push(new TextTrack(settings));\n    });\n    return textTracks;\n  }\n\n  _parseAudioTracks(castAudioTracks: Array<Object>): Array<AudioTrack> {\n    const audioTracks = [];\n    castAudioTracks.forEach(track => {\n      const settings: Object = {\n        id: track.trackId,\n        index: track.trackId - 1,\n        label: track.name,\n        language: track.language,\n        active: false\n      };\n      audioTracks.push(new AudioTrack(settings));\n    });\n    return audioTracks;\n  }\n}\n\nexport {CastEngine};\n","// @flow\nimport {core} from 'kaltura-player-js';\n\nconst {StreamType, EngineType} = core;\n\nconst DefaultPlayerConfig: Object = {\n  playback: {\n    autoplay: false,\n    preload: 'none',\n    disableUserCache: true,\n    streamPriority: [\n      {\n        engine: EngineType.CAST,\n        format: StreamType.HLS\n      },\n      {\n        engine: EngineType.CAST,\n        format: StreamType.DASH\n      },\n      {\n        engine: EngineType.CAST,\n        format: StreamType.PROGRESSIVE\n      }\n    ]\n  },\n  ui: {\n    disable: true\n  }\n};\n\nexport {DefaultPlayerConfig};\n","// @flow\nclass ReceiverError {\n  code: number;\n  description: string;\n\n  constructor(type: Object) {\n    this.code = type.code;\n    this.description = type.description;\n  }\n}\n\nexport {ReceiverError};\n","// @flow\nconst ErrorType: {[type: string]: Object} = {\n  CAST_ELEMENT_NOT_FOUND: {\n    code: 100020,\n    description: \"<cast-media-element> tag isn't found in the DOM\"\n  }\n};\n\nexport {ErrorType};\n","// @flow\nimport {core, setup} from 'kaltura-player-js';\nimport {CastEngine} from './cast-engine';\nimport {DefaultPlayerConfig} from './default-player-config';\nimport {ReceiverError} from './error/error';\nimport {ErrorType} from './error/error-type';\n\nconst {Utils, unRegisterEngine, registerEngine, EngineType} = core;\n\nexport const CAST_MEDIA_PLAYER_TAG: string = 'cast-media-player';\nconst PLAYER_CONTAINER: string = 'kaltura-receiver-player-container';\n\nclass PlayerLoader {\n  static loadPlayer(config: Object): Object {\n    const castMediaPlayerEl = Utils.Dom.getElementsByTagName(CAST_MEDIA_PLAYER_TAG)[0];\n    if (castMediaPlayerEl) {\n      const castMediaElement = castMediaPlayerEl.getMediaElement();\n      castMediaElement.style.position = 'absolute';\n      const playerContainerEl = Utils.Dom.createElement('div');\n      playerContainerEl.id = PLAYER_CONTAINER;\n      Utils.Dom.appendChild(document.body, playerContainerEl);\n      unRegisterEngine(EngineType.HTML5);\n      registerEngine(EngineType.CAST, CastEngine);\n      const playerConfig = Utils.Object.mergeDeep({targetId: PLAYER_CONTAINER}, DefaultPlayerConfig, config);\n      const player = setup(playerConfig);\n      Utils.Dom.prependTo(playerContainerEl, castMediaElement.parentNode);\n      return player;\n    } else {\n      throw new ReceiverError(ErrorType.CAST_ELEMENT_NOT_FOUND);\n    }\n  }\n}\n\nexport {PlayerLoader};\n","// @flow\nimport {cast as remote, core} from 'kaltura-player-js';\n\nconst {TextStyleConverter} = remote;\nconst {TrackType, getLogger} = core;\n\nclass ReceiverTracksManager {\n  _logger: any = getLogger('ReceiverTracksManager');\n  _playerManager: Object;\n  _player: Object;\n\n  constructor(player: Object) {\n    this._playerManager = cast.framework.CastReceiverContext.getInstance().getPlayerManager();\n    this._player = player;\n    this._attachListeners();\n  }\n\n  setInitialTracks(): void {\n    const mediaInfo = this._playerManager.getMediaInformation();\n    this._logger.debug('Set initial tracks', mediaInfo.customData);\n    if (mediaInfo.customData) {\n      this._setInitialAudioTrack(mediaInfo.customData.audioLanguage);\n      this._setInitialTextTrack(mediaInfo.customData.textLanguage);\n    }\n  }\n\n  _attachListeners(): void {\n    this._playerManager.addEventListener(cast.framework.events.EventType.REQUEST_EDIT_TRACKS_INFO, requestEvent => {\n      const activeTrackIds = requestEvent.requestData.activeTrackIds;\n      if (activeTrackIds) {\n        this._handleAudioTrackSelection(activeTrackIds);\n        this._handleTextTrackSelection(activeTrackIds);\n      } else {\n        const textTrackStyle = requestEvent.requestData.textTrackStyle;\n        this._handleTextStyleSelection(textTrackStyle);\n      }\n    });\n  }\n\n  _handleTextTrackSelection(activeTrackIds: Array<number>): void {\n    const textTracks = this._player.getTracks(TrackType.TEXT);\n    const activeTextTrack = textTracks.find(t => t.active);\n    const nextActiveTextTrack = textTracks.find(t => activeTrackIds.includes(t.id));\n    if (nextActiveTextTrack) {\n      this._player.selectTrack(nextActiveTextTrack);\n    } else if (activeTextTrack && activeTextTrack.language !== 'off') {\n      const offTrack = textTracks.find(t => t.language === 'off');\n      this._player.selectTrack(offTrack);\n    }\n  }\n\n  _handleAudioTrackSelection(activeTrackIds: Array<number>): void {\n    const audioTracks = this._player.getTracks(TrackType.AUDIO);\n    const activeAudioTrack = audioTracks.find(t => t.active);\n    const nextActiveAudioTrack = audioTracks.find(t => activeTrackIds.includes(t.id));\n    if (activeAudioTrack && nextActiveAudioTrack && activeAudioTrack.id !== nextActiveAudioTrack.id) {\n      this._player.selectTrack(nextActiveAudioTrack);\n    }\n  }\n\n  _handleTextStyleSelection(textStyle: Object): void {\n    this._player.textStyle = TextStyleConverter.toPlayerTextStyle(textStyle);\n  }\n\n  _setInitialTextTrack(textLanguage: ?string): void {\n    const textTracksManager = this._playerManager.getTextTracksManager();\n    const textTracks = this._player.getTracks(TrackType.TEXT);\n    if (textLanguage) {\n      if (textTracks.some(track => track.language === textLanguage)) {\n        this._logger.debug('Set initial text track - setActiveByLanguage', textLanguage);\n        textTracksManager.setActiveByLanguage(textLanguage);\n      } else {\n        this._logger.warn(`Text track ${textLanguage} doesn't exist in the supported text tracks`);\n      }\n    }\n  }\n\n  _setInitialAudioTrack(audioLanguage: ?string): void {\n    const audioTracksManager = this._playerManager.getAudioTracksManager();\n    const audioTracks = audioTracksManager.getTracks();\n    this._logger.debug('Set initial audio track', audioLanguage, audioTracks);\n    if (audioTracks.length > 0) {\n      if (audioLanguage) {\n        this._logger.debug('Set initial audio track - setActiveByLanguage', audioLanguage);\n        audioTracksManager.setActiveByLanguage(audioLanguage);\n      } else {\n        const audioTrackId = audioTracks[0].trackId;\n        const audioTrack = this._player.getTracks(TrackType.AUDIO).find(t => t.id === audioTrackId);\n        if (audioTrack) {\n          this._logger.debug('Set initial audio track - setActiveById', audioTrackId);\n          audioTracksManager.setActiveById(audioTrackId);\n          this._player.selectTrack(audioTrack);\n        }\n      }\n    }\n  }\n}\n\nexport {ReceiverTracksManager};\n","// @flow\nimport {cast as remote, core} from 'kaltura-player-js';\nimport {CUSTOM_CHANNEL} from './receiver-manager';\n\nconst {EventType, Ad, AdBreak, AdBreakType, getLogger, FakeEvent} = core;\nconst {CustomEventMessage} = remote;\n\nclass ReceiverAdsManager {\n  _logger: any = getLogger('ReceiverAdsManager');\n  _context: Object;\n  _playerManager: Object;\n  _player: Object;\n  _adProgressIntervalId: ?IntervalID;\n  _ad: ?Ad;\n  _adBreak: ?AdBreak;\n  _adIsPlaying: boolean;\n  _adCanSkipTriggered: boolean = false;\n  _adLifecycleEventHandlers: {[event: string]: Function};\n  _adTrackingEventHandlers: {[event: string]: Function};\n  _playerEventHandlers: {[event: string]: Function};\n  _timePercentEvent: {[time: string]: boolean} = {\n    AD_REACHED_25_PERCENT: false,\n    AD_REACHED_50_PERCENT: false,\n    AD_REACHED_75_PERCENT: false\n  };\n\n  constructor(player: Object) {\n    this._context = cast.framework.CastReceiverContext.getInstance();\n    this._playerManager = this._context.getPlayerManager();\n    this._player = player;\n    this._attachListeners();\n  }\n\n  skipAd(): void {\n    this._logger.debug('Skip ad');\n    const requestData = new cast.framework.messages.RequestData(cast.framework.messages.MessageType.SKIP_AD);\n    this._playerManager.sendLocalMediaRequest(requestData);\n  }\n\n  adBreak(): boolean {\n    return !!this._adBreak;\n  }\n\n  _attachListeners(): void {\n    this._adLifecycleEventHandlers = {\n      [cast.framework.events.EventType.PLAYER_LOAD_COMPLETE]: this._onPlayerLoadComplete.bind(this),\n      [cast.framework.events.EventType.BREAK_STARTED]: this._onBreakStarted.bind(this),\n      [cast.framework.events.EventType.BREAK_ENDED]: this._onBreakEnded.bind(this),\n      [cast.framework.events.EventType.BREAK_CLIP_LOADING]: this._onBreakClipLoading.bind(this),\n      [cast.framework.events.EventType.BREAK_CLIP_STARTED]: this._onBreakClipStarted.bind(this),\n      [cast.framework.events.EventType.BREAK_CLIP_ENDED]: this._onBreakClipEnded.bind(this)\n    };\n    this._adTrackingEventHandlers = {\n      [cast.framework.events.EventType.PAUSE]: this._onAdPaused.bind(this),\n      [cast.framework.events.EventType.PLAY]: this._onAdResumed.bind(this)\n    };\n    this._playerEventHandlers = {\n      [EventType.MUTE_CHANGE]: this._onMuteChange.bind(this),\n      [EventType.VOLUME_CHANGE]: this._onVolumeChange.bind(this)\n    };\n    Object.keys(this._adLifecycleEventHandlers).forEach(event => this._playerManager.addEventListener(event, this._adLifecycleEventHandlers[event]));\n  }\n\n  _onPlayerLoadComplete = () => {\n    const positions = [];\n    const breakManager = this._playerManager.getBreakManager();\n    if (breakManager) {\n      const breaks = breakManager.getBreaks();\n      if (breaks && breaks.length > 0) {\n        breaks.forEach(b => positions.push(b.position));\n        this._sendEventAndCustomMessage(this._player.Event.AD_MANIFEST_LOADED, {adBreaksPosition: positions});\n      }\n    }\n  };\n\n  _onBreakStarted = (breaksEvent: Object) => {\n    this._toggleAdBreakListeners(true);\n    const adBreakOptions = this._getAdBreakOptions(breaksEvent);\n    const adBreak = new AdBreak(adBreakOptions);\n    this._sendEventAndCustomMessage(this._player.Event.AD_BREAK_START, {adBreak: adBreak});\n    this._adBreak = adBreak;\n  };\n\n  _onBreakEnded = (breaksEvent: Object) => {\n    this._toggleAdBreakListeners(false);\n    this._sendEventAndCustomMessage(this._player.Event.AD_BREAK_END);\n    this._adBreak = null;\n    const breaks = this._playerManager.getBreakManager().getBreaks();\n    const index = breaks.findIndex(b => b.id === breaksEvent.breakId);\n    if (index + 1 === breaks.length) {\n      this._sendEventAndCustomMessage(this._player.Event.ALL_ADS_COMPLETED);\n    }\n  };\n\n  _onBreakClipLoading = (breaksEvent: Object) => {\n    const adOptions = this._getAdOptions(breaksEvent);\n    const ad = new Ad(breaksEvent.breakClipId, adOptions);\n    this._sendEventAndCustomMessage(this._player.Event.AD_LOADED, {ad: ad});\n    this._ad = ad;\n  };\n\n  _onBreakClipStarted = (breaksEvent: Object) => {\n    const adOptions = this._getAdOptions(breaksEvent);\n    const ad = new Ad(breaksEvent.breakClipId, adOptions);\n    this._sendEventAndCustomMessage(this._player.Event.AD_STARTED, {ad});\n    this._adIsPlaying = true;\n  };\n\n  _onBreakClipEnded = () => {\n    this._sendEventAndCustomMessage(this._player.Event.AD_COMPLETED);\n    this._adIsPlaying = false;\n    this._adCanSkipTriggered = false;\n    this._ad = null;\n  };\n\n  _onAdPaused = () => {\n    this._sendEventAndCustomMessage(this._player.Event.AD_PAUSED);\n    this._adIsPlaying = false;\n  };\n\n  _onAdResumed = () => {\n    this._sendEventAndCustomMessage(this._player.Event.AD_RESUMED);\n    this._adIsPlaying = true;\n  };\n\n  _onAdProgress = () => {\n    if (!this._ad) return;\n    const adDuration = this._playerManager.getBreakClipDurationSec();\n    const adCurrentTime = this._playerManager.getBreakClipCurrentTimeSec();\n    const percent = adCurrentTime / adDuration;\n    if (!this._timePercentEvent.AD_REACHED_25_PERCENT && percent >= 0.25) {\n      this._timePercentEvent.AD_REACHED_25_PERCENT = true;\n      this._sendEventAndCustomMessage(this._player.Event.AD_FIRST_QUARTILE);\n    }\n    if (!this._timePercentEvent.AD_REACHED_50_PERCENT && percent >= 0.5) {\n      this._timePercentEvent.AD_REACHED_50_PERCENT = true;\n      this._sendEventAndCustomMessage(this._player.Event.AD_MIDPOINT);\n    }\n    if (!this._timePercentEvent.AD_REACHED_75_PERCENT && percent >= 0.75) {\n      this._timePercentEvent.AD_REACHED_75_PERCENT = true;\n      this._sendEventAndCustomMessage(this._player.Event.AD_THIRD_QUARTILE);\n    }\n    if (this._ad && !this._adCanSkipTriggered && this._ad && this._ad.skippable) {\n      if (adCurrentTime >= this._ad.skipOffset) {\n        this._sendEventAndCustomMessage(this._player.Event.AD_CAN_SKIP);\n        this._adCanSkipTriggered = true;\n      }\n    }\n    this._sendEventAndCustomMessage(this._player.Event.AD_PROGRESS, {\n      adProgress: {\n        currentTime: adCurrentTime,\n        duration: adDuration\n      }\n    });\n  };\n\n  _onMuteChange = () => {\n    if (this._player.muted) {\n      this._sendEventAndCustomMessage(this._player.Event.AD_MUTED);\n    }\n  };\n\n  _onVolumeChange = () => {\n    this._sendEventAndCustomMessage(this._player.Event.AD_VOLUME_CHANGED);\n  };\n\n  _toggleAdBreakListeners(toggle: boolean): void {\n    if (toggle) {\n      Object.keys(this._adTrackingEventHandlers).forEach(event => this._playerManager.addEventListener(event, this._adTrackingEventHandlers[event]));\n      Object.keys(this._playerEventHandlers).forEach(event => this._player.addEventListener(event, this._playerEventHandlers[event]));\n      this._adProgressIntervalId = setInterval(this._onAdProgress.bind(this), 300);\n    } else {\n      Object.keys(this._adTrackingEventHandlers).forEach(event =>\n        this._playerManager.removeEventListener(event, this._adTrackingEventHandlers[event])\n      );\n      Object.keys(this._playerEventHandlers).forEach(event => this._player.removeEventListener(event, this._playerEventHandlers[event]));\n      if (this._adProgressIntervalId) {\n        clearInterval(this._adProgressIntervalId);\n        this._adProgressIntervalId = null;\n      }\n    }\n  }\n\n  _getAdBreakOptions(breaksEvent: Object): Object {\n    const options = {};\n    const currentBreak = this._playerManager.getBreakManager().getBreakById(breaksEvent.breakId);\n    if (currentBreak) {\n      options.position = currentBreak.position;\n      options.type = this._getAdBreakTypeByPosition(currentBreak.position);\n      options.numAds = currentBreak.breakClipIds.length;\n    }\n    return options;\n  }\n\n  _getAdBreakTypeByPosition(position: number): void {\n    switch (position) {\n      case 0:\n        return AdBreakType.PRE;\n      case -1:\n        return AdBreakType.POST;\n      default:\n        return AdBreakType.MID;\n    }\n  }\n\n  _getAdOptions(breaksEvent: Object): Object {\n    const options = {};\n    const currentBreak = this._playerManager.getBreakManager().getBreakById(breaksEvent.breakId);\n    if (currentBreak) {\n      const currentBreakClip = this._playerManager.getBreakManager().getBreakClipById(breaksEvent.breakClipId);\n      options.url = currentBreakClip.contentId;\n      options.contentType = currentBreakClip.contentType;\n      options.title = currentBreakClip.title;\n      options.position = currentBreak.breakClipIds.indexOf(currentBreakClip.id) + 1;\n      options.duration = currentBreakClip.duration;\n      options.clickThroughUrl = currentBreakClip.clickThroughUrl;\n      options.posterUrl = currentBreakClip.posterUrl;\n      options.skipOffset = currentBreakClip.whenSkippable;\n      options.linear = true;\n    }\n    return options;\n  }\n\n  _sendEventAndCustomMessage(event: string, payload: any): void {\n    this._logger.debug(event.toUpperCase(), payload);\n    this._player.dispatchEvent(new FakeEvent(event, payload));\n    this._context.sendCustomMessage(CUSTOM_CHANNEL, undefined, new CustomEventMessage(event, payload));\n  }\n}\n\nexport {ReceiverAdsManager};\n","// @flow\nimport {cast as remote, core} from 'kaltura-player-js';\nimport {PlayerLoader} from './player-loader';\nimport {ReceiverTracksManager} from './receiver-tracks-manager';\nimport {ReceiverAdsManager} from './receiver-ads-manager';\n\nconst {FakeEvent, EventManager, DrmScheme, Utils, getLogger} = core;\nconst {CustomMessageType, CustomActionType, CustomActionMessage} = remote;\n\nexport const CUSTOM_CHANNEL = 'urn:x-cast:com.kaltura.cast.playkit';\nconst LIVE_EDGE = -1;\n\nclass ReceiverManager {\n  _logger: any = getLogger('ReceiverManager');\n  _context: Object;\n  _playerManager: Object;\n  _eventManager: EventManager;\n  _player: Object;\n  _shouldAutoPlay: boolean = true;\n  _firstPlay: boolean = true;\n  _tracksManager: ReceiverTracksManager;\n  _adsManager: ReceiverAdsManager;\n  _messageInterceptorsHandlers: {[message: string]: Function} = {\n    [cast.framework.messages.MessageType.LOAD]: this.onLoad,\n    [cast.framework.messages.MessageType.MEDIA_STATUS]: this.onMediaStatus,\n    [cast.framework.messages.MessageType.STOP]: this.onStop\n  };\n  _playerManagerEventHandlers: {[event: string]: Function} = {\n    [cast.framework.events.EventType.REQUEST_PLAY]: this._onRequestPlayEvent,\n    [cast.framework.events.EventType.REQUEST_PAUSE]: this._onRequestPauseEvent,\n    [cast.framework.events.EventType.PLAY]: this._onPlayEvent,\n    [cast.framework.events.EventType.PLAYER_LOAD_COMPLETE]: this._onPlayerLoadCompleteEvent\n  };\n  _castContextEventHandlers: {[event: string]: Function} = {\n    [cast.framework.system.EventType.SYSTEM_VOLUME_CHANGED]: this._onSystemVolumeChangedEvent\n  };\n\n  constructor(config: Object) {\n    this._context = cast.framework.CastReceiverContext.getInstance();\n    this._playerManager = this._context.getPlayerManager();\n    this._eventManager = new EventManager();\n    this._player = PlayerLoader.loadPlayer(config);\n    this._tracksManager = new ReceiverTracksManager(this._player);\n    this._adsManager = new ReceiverAdsManager(this._player);\n    this._attachListeners();\n  }\n\n  getPlayer(): Object {\n    return this._player;\n  }\n\n  start(options: Object): void {\n    const defaultOptions = new cast.framework.CastReceiverOptions();\n    defaultOptions.customNamespaces = {\n      [CUSTOM_CHANNEL]: cast.framework.system.MessageType.JSON\n    };\n    Utils.Object.mergeDeep(defaultOptions, options);\n    this._logger.debug('Start receiver', defaultOptions);\n    this._context.start(defaultOptions);\n  }\n\n  onLoad(loadRequestData: Object): Promise<Object> {\n    this._logger.debug('onLoad', loadRequestData);\n    this._reset();\n    return new Promise((resovle, reject) => {\n      const mediaInfo = loadRequestData.media.customData.mediaInfo;\n      const mediaConfig = loadRequestData.media.customData.mediaConfig;\n      this._maybeCreateVmapAdsRequest(loadRequestData.media);\n      this._maybeReplaceAdTagTimestamp(loadRequestData.media);\n      this._eventManager.listen(this._player, this._player.Event.ERROR, event => reject(event));\n      this._eventManager.listen(this._player, this._player.Event.SOURCE_SELECTED, event => this._onSourceSelected(event, loadRequestData, resovle));\n      if (mediaInfo) {\n        this._logger.debug('loadMedia', mediaInfo);\n        this._player.loadMedia(mediaInfo);\n      } else {\n        this._logger.debug('setMedia', mediaConfig);\n        this._player.setMedia(mediaConfig);\n      }\n    });\n  }\n\n  onStop(requestData: Object): Promise<Object> {\n    this._logger.debug('onStop', requestData);\n    this._destroy();\n    return requestData;\n  }\n\n  onMediaStatus(mediaStatus: Object): Promise<Object> {\n    this._logger.debug('mediaStatus', mediaStatus);\n    mediaStatus.customData = mediaStatus.customData || {};\n    if (this._player) {\n      mediaStatus.customData.mediaInfo = this._player.getMediaInfo();\n      if (this._player.isLive()) {\n        mediaStatus.currentTime = this._player.currentTime;\n        if (mediaStatus.media) {\n          mediaStatus.media.duration = this._player.duration;\n        }\n      }\n    }\n    if (mediaStatus.playerState !== this._playerManager.getPlayerState()) {\n      mediaStatus.playerState = this._playerManager.getPlayerState();\n    }\n    return mediaStatus;\n  }\n\n  _attachListeners(): void {\n    this._context.addCustomMessageListener(CUSTOM_CHANNEL, customMessage => this._onCustomMessage(customMessage));\n    Object.keys(this._playerManagerEventHandlers).forEach(event =>\n      this._playerManager.addEventListener(event, this._playerManagerEventHandlers[event].bind(this))\n    );\n    Object.keys(this._messageInterceptorsHandlers).forEach(msg =>\n      this._playerManager.setMessageInterceptor(msg, this._messageInterceptorsHandlers[msg].bind(this))\n    );\n    Object.keys(this._castContextEventHandlers).forEach(event =>\n      this._context.addEventListener(event, this._castContextEventHandlers[event].bind(this))\n    );\n  }\n\n  _reset(): void {\n    this._shouldAutoPlay = true;\n    this._firstPlay = true;\n    this._eventManager.removeAll();\n    this._player.reset();\n  }\n\n  _destroy(): void {\n    this._shouldAutoPlay = true;\n    this._firstPlay = true;\n    this._eventManager.destroy();\n    this._player.destroy();\n  }\n\n  _onSourceSelected(event: FakeEvent, loadRequestData: Object, resolve: Function): void {\n    const source = event.payload.selectedSource[0];\n    this._handleAutoPlay(loadRequestData);\n    this._handleLiveDvr(loadRequestData);\n    this._setMediaInfo(loadRequestData, source);\n    this._maybeSetDrmLicenseUrl(source);\n    const sources = this._player.config.sources;\n    if (sources.options && sources.options.forceRedirectExternalStreams) {\n      this._logger.debug('Redirect stream started');\n      Utils.Http.jsonp(loadRequestData.media.contentUrl, (data, url) => {\n        loadRequestData.media.contentUrl = sources.options.redirectExternalStreamsHandler(data, url);\n        this._logger.debug('Redirect stream ended', loadRequestData.media.contentUrl);\n        resolve(loadRequestData);\n      });\n    } else {\n      resolve(loadRequestData);\n    }\n  }\n\n  _setMediaInfo(loadRequestData: Object, source: Object): void {\n    loadRequestData.media.contentId = loadRequestData.media.contentId || source.id;\n    loadRequestData.media.contentUrl = loadRequestData.media.contentUrl || source.url;\n    loadRequestData.media.contentType = loadRequestData.media.contentType || source.mimetype;\n    loadRequestData.media.streamType = this._player.isLive() ? cast.framework.messages.StreamType.LIVE : cast.framework.messages.StreamType.BUFFERED;\n    loadRequestData.media.metadata = loadRequestData.media.metadata || new cast.framework.messages.GenericMediaMetadata();\n    loadRequestData.media.metadata.title = loadRequestData.media.metadata.title || this._player.config.sources.metadata.name;\n    loadRequestData.media.metadata.subtitle = loadRequestData.media.metadata.subtitle || this._player.config.sources.metadata.description;\n    loadRequestData.media.metadata.images = loadRequestData.media.metadata.images || [{url: this._player.config.sources.poster}];\n    loadRequestData.media.hlsSegmentFormat = loadRequestData.media.hlsSegmentFormat || cast.framework.messages.HlsSegmentFormat.TS;\n    this._logger.debug('Media info has been set', loadRequestData);\n  }\n\n  _handleAutoPlay(loadRequestData: Object): void {\n    if (!loadRequestData.autoplay) {\n      this._shouldAutoPlay = false;\n      loadRequestData.autoplay = true;\n    }\n  }\n\n  _handleLiveDvr(loadRequestData: Object): void {\n    if (this._player.isDvr()) {\n      if (loadRequestData.currentTime === LIVE_EDGE) {\n        delete loadRequestData.currentTime;\n        this._logger.debug(`Live DVR will seek to live edge`);\n      }\n      // Workaround to avoid Live & Dvr seek issue\n      this._playerManager.removeSupportedMediaCommands(cast.framework.messages.Command.SEEK);\n    } else if (!this._player.isLive()) {\n      this._playerManager.addSupportedMediaCommands(cast.framework.messages.Command.SEEK);\n    }\n  }\n\n  _maybeSetDrmLicenseUrl(source: Object): void {\n    if (source.drmData) {\n      const data = source.drmData.find(data => data.scheme === DrmScheme.WIDEVINE);\n      if (data) {\n        this._playerManager.setMediaPlaybackInfoHandler((loadRequest, playbackConfig) => {\n          playbackConfig.protectionSystem = cast.framework.ContentProtection.WIDEVINE;\n          playbackConfig.licenseUrl = data.licenseUrl;\n          this._logger.debug(`Set drm license url`, playbackConfig);\n          return playbackConfig;\n        });\n      }\n    }\n  }\n\n  _onPlayEvent(): void {\n    this._logger.debug('Play event', {firstPlay: this._firstPlay});\n    if (this._firstPlay) {\n      if (this._shouldAutoPlay) {\n        this._player.play();\n      } else {\n        this._playerManager.pause();\n      }\n      this._firstPlay = false;\n    }\n  }\n\n  _onRequestPlayEvent(): void {\n    this._logger.debug('Request play event');\n    this._player.play();\n  }\n\n  _onRequestPauseEvent(): void {\n    this._logger.debug('Request pause event');\n    this._player.pause();\n  }\n\n  _onPlayerLoadCompleteEvent(): void {\n    const loadPlayerAndSetInitialTracks = () => {\n      this._player.load();\n      this._player.ready().then(() => this._tracksManager.setInitialTracks());\n    };\n    this._logger.debug('Player load complete');\n    if (this._adsManager.adBreak()) {\n      this._eventManager.listenOnce(this._player, this._player.Event.AD_BREAK_END, () => {\n        this._eventManager.listenOnce(this._player, this._player.Event.PLAYING, loadPlayerAndSetInitialTracks);\n      });\n    } else {\n      loadPlayerAndSetInitialTracks();\n    }\n  }\n\n  _onSystemVolumeChangedEvent(systemVolumeChangedEvent: Object): void {\n    const data = systemVolumeChangedEvent.data;\n    if (this._player.volume !== data.level) {\n      this._player.volume = data.level;\n    }\n    if (this._player.muted !== data.muted) {\n      this._player.muted = data.muted;\n    }\n  }\n\n  _onCustomMessage(customMessageEvent: Object): void {\n    const customMessage = customMessageEvent.data;\n    this._logger.debug('Custom message received', customMessage);\n    switch (customMessage.type) {\n      case CustomMessageType.ACTION:\n        this._handleCustomAction(customMessage);\n        break;\n      default:\n        break;\n    }\n  }\n\n  _handleCustomAction(customAction: CustomActionMessage): void {\n    switch (customAction.action) {\n      case CustomActionType.SKIP_AD:\n        this._adsManager.skipAd();\n        break;\n      default:\n        break;\n    }\n  }\n\n  _maybeCreateVmapAdsRequest(media: Object): void {\n    if (media.customData && media.customData.vmapAdsRequest) {\n      media.vmapAdsRequest = media.customData.vmapAdsRequest;\n    }\n  }\n\n  _maybeReplaceAdTagTimestamp(media: Object): void {\n    const replaceTimestamp = adtag => {\n      if (adtag && regex.test(adtag)) {\n        const match = adtag.match(regex);\n        return adtag.replace(match[1], Date.now());\n      }\n      return adtag;\n    };\n    const regex = /correlator=(\\[timestamp\\])/;\n    if (media.breakClips) {\n      const breakClips = media.breakClips;\n      breakClips.forEach(breakClip => {\n        if (breakClip.vastAdsRequest && breakClip.vastAdsRequest.adTagUrl) {\n          breakClip.vastAdsRequest.adTagUrl = replaceTimestamp(breakClip.vastAdsRequest.adTagUrl);\n        }\n      });\n    }\n    if (media.vmapAdsRequest) {\n      media.vmapAdsRequest.adTagUrl = replaceTimestamp(media.vmapAdsRequest.adTagUrl);\n    }\n  }\n}\n\nexport {ReceiverManager};\n","// @flow\nimport {ReceiverManager} from './receiver-manager';\n\nlet receiverManager;\n\n/**\n * Kaltura Receiver Player SDK.\n * @class Receiver\n * @param {KPReceiverOptionsObject} config - The receiver SDK configuration.\n */\nclass ReceiverManagerAPI {\n  constructor(config: KPReceiverOptionsObject) {\n    receiverManager = new ReceiverManager(config);\n  }\n\n  /**\n   * Initializes the receiver SDK, so that receiver app can receive requests from senders.\n   * Internally calls to cast.framework.CastReceiverContext.start() to initializes system manager and media manager.\n   * @public\n   * @instance\n   * @param {Object=} options - Cast receiver context options. All options are optional. See {@link https://developers.google.com/cast/docs/reference/caf_receiver/cast.framework.CastReceiverOptions|cast.framework.CastReceiverOptions}\n   * @returns {void}\n   * @memberof Receiver\n   */\n  start(options?: Object = {}): void {\n    receiverManager.start(options);\n  }\n\n  /**\n   * The LOAD default handler of the receiver SDK. This handler should be called just in case LOAD interceptor is override by the app, otherwise it will be called internally.\n   * @public\n   * @instance\n   * @param {Object} loadRequestData - Media event LOAD request data. See {@link https://developers.google.com/cast/docs/reference/caf_receiver/cast.framework.messages.LoadRequestData|cast.framework.messages.LoadRequestData}\n   * @returns {Promise<Object>} - The load promise.\n   * @memberof Receiver\n   */\n  onLoad(loadRequestData: Object): Promise<Object> {\n    return receiverManager.onLoad(loadRequestData);\n  }\n\n  /**\n   * Adding an event listener to a receiver player event.\n   * @public\n   * @instance\n   * @param {string} type - The event type.\n   * @param {Function} listener - The event handler.\n   * @returns {void}\n   * @memberof Receiver\n   */\n  addEventListener(type: string, listener: Function): void {\n    receiverManager.getPlayer().addEventListener(type, listener);\n  }\n\n  /**\n   * Removing an event listener from a receiver player event.\n   * @public\n   * @instance\n   * @param {string} type - The event type.\n   * @param {Function} listener - The event handler.\n   * @returns {void}\n   * @memberof Receiver\n   */\n  removeEventListener(type: string, listener: Function): void {\n    receiverManager.getPlayer().removeEventListener(type, listener);\n  }\n}\n\nexport {ReceiverManagerAPI};\n","// @flow\nimport {ReceiverManagerAPI} from './receiver-manager-api';\n\ndeclare var __VERSION__: string;\ndeclare var __NAME__: string;\n\nconst VERSION = __VERSION__;\nconst NAME = __NAME__;\n\nexport {ReceiverManagerAPI as Receiver};\nexport {VERSION, NAME};\n"],"sourceRoot":""}